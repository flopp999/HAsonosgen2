blueprint:
  name: CheckWatt Monthly4
  description: creates an automation to update monthly revenue entity
  domain: automation
  input:
    daily_sensor:
      name: CheckWatt daily revenue sensor
      selector:
        entity:
          filter:
            integration: checkwatt
            device_class: monetary
    monthly_sensor:
      name: CheckWatt monthly revenue sensor
      selector:
        entity:
          filter:
            domain: input_number
trigger:
  platform: time
  at: "23:59:50"
condition:
  - condition: template
    value_template: "value_template: \"{{ now().day == 1 }}\""

variables:
  month: !input monthly_sensor
  day: !input daily_sensor
  
action:
  service: input_number.set_value
  data_template:
    value: "value_template: \"{{ month | float + day | float }}\""
  target:
    entity_id: !input monthly_sensor
mode: single
